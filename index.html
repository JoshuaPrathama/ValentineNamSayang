<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Valentine ‚ù§Ô∏è</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      body {
        overflow: hidden;
        background: linear-gradient(-45deg, #ff9a9e, #fad0c4, #ffc3a0, #ffafbd);
        background-size: 400% 400%;
        animation: gradientBG 12s ease infinite;
      }

      @keyframes gradientBG {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      .heart {
        position: absolute;
        font-size: 18px;
        animation: floatUp 6s linear infinite;
      }

      @keyframes floatUp {
        0% {
          transform: translateY(100vh) scale(0.5);
          opacity: 0;
        }
        40% {
          opacity: 1;
        }
        100% {
          transform: translateY(-10vh) scale(1.3);
          opacity: 0;
        }
      }

      .pop {
        animation: pop 0.5s ease forwards;
      }

      @keyframes pop {
        0% {
          transform: scale(0.5);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
    </style>
  </head>

  <body class="h-screen flex items-center justify-center relative">
    <div id="hearts"></div>

    <div
      class="bg-white/80 backdrop-blur-lg p-10 rounded-3xl text-center shadow-2xl w-[420px]"
    >
      <h1 class="text-4xl font-bold text-pink-600 mb-3 animate-pulse">
        Will You Be My Valentine?
      </h1>

      <p class="text-gray-600 mb-2">
        Say this first:
      </p>

      <p class="font-bold text-pink-500 mb-4">
        "I LOVE YOU JOSHUA MY CUTIE"
      </p>

      <button
        id="startBtn"
        class="mb-3 px-6 py-3 bg-pink-500 text-white rounded-xl shadow-lg hover:scale-110 transition"
      >
        üé§ Speak
      </button>

      <p class="output text-sm text-gray-700 mb-5 h-6"></p>

      <!-- TEXT SETELAH DIA NGOMONG -->
      <p id="afterSpeak" class="hidden text-pink-600 font-semibold mb-4">
        Aww... say it again? ü•∫
      </p>

      <!-- YES BUTTON -->
      <button
        id="yesBtn"
        class="hidden px-10 py-3 text-lg font-semibold text-white bg-pink-500 rounded-xl shadow-xl"
      >
        YES üíñ
      </button>

      <div id="finalMsg" class="hidden mt-8 text-2xl text-pink-600 font-bold">
        YAYYY ‚ù§Ô∏è<br /><br />
        Now send me your PAP üò≥üì∏
      </div>
    </div>

    <script>
      // Floating hearts
      function createHeart() {
        const heart = document.createElement("div");
        heart.className = "heart";
        heart.innerHTML = "‚ù§Ô∏è";
        heart.style.left = Math.random() * 100 + "vw";
        heart.style.animationDuration = Math.random() * 3 + 3 + "s";
        document.getElementById("hearts").appendChild(heart);
        setTimeout(() => heart.remove(), 6000);
      }
      setInterval(createHeart, 300);

      // Speech Recognition
      const SpeechRecognition =
        window.SpeechRecognition || window.webkitSpeechRecognition;
      const recognition = new SpeechRecognition();

      recognition.continuous = false;
      recognition.lang = "en-US";
      recognition.interimResults = false;
      recognition.maxAlternatives = 1;

      const diagnostic = document.querySelector(".output");
      const startBtn = document.querySelector("#startBtn");
      const yesBtn = document.querySelector("#yesBtn");
      const finalMsg = document.querySelector("#finalMsg");
      const afterSpeak = document.querySelector("#afterSpeak");

      let saidOnce = false;

      startBtn.onclick = () => {
        recognition.start();
        diagnostic.textContent = "Listening...";
      };

      recognition.onresult = (event) => {
        const speech = event.results[0][0].transcript.toLowerCase();
        diagnostic.textContent = "You said: " + speech;

        if (speech.includes("i love you joshua my cutie")) {
          if (!saidOnce) {
            afterSpeak.classList.remove("hidden");
            afterSpeak.classList.add("pop");
            saidOnce = true;
          } else {
            yesBtn.classList.remove("hidden");
            yesBtn.classList.add("pop", "scale-110");
          }
        }
      };

      // YES click
      yesBtn.onclick = () => {
        finalMsg.classList.remove("hidden");
        finalMsg.classList.add("pop");
        yesBtn.innerText = "I LOVE YOU ‚ù§Ô∏è";

        for (let i = 0; i < 30; i++) {
          createHeart();
        }
      };
    </script>
  </body>
</html>
